# 项目概述

这是一个基于 Electron 的安全应用程序的 API 层，专门用于处理主进程和渲染进程之间的 IPC（进程间通信）。它使用 Zod 进行数据验证，确保通信的安全性和类型正确性。

主要技术栈：
- **Electron**: 用于构建跨平台桌面应用
- **Zod**: 用于数据验证和类型推导
- **TypeScript**: 用于类型安全

## 项目功能

该 API 层定义了三个核心模块的 IPC 接口：
1. **Dist 模块**: 管理静态文件目录配置
2. **Server 模块**: 管理本地服务器实例
3. **Shell 模块**: 处理与操作系统 shell 的交互

## 项目结构

```
src/
├── core.ts                 # IPC 客户端和处理器创建工具
├── index.ts                # 模块导出入口
└── modules/
    ├── distMgr.ts          # Dist 模块 API 定义
    ├── liveServer.ts       # Server 模块 API 定义
    └── shell.ts            # Shell 模块 API 定义
```

### 核心模块

- **Dist 模块**: 定义了目录配置的管理接口，包括获取、添加、更新、删除目录配置以及选择目录的功能。支持代理规则配置。
- **Server 模块**: 定义了本地服务器的控制接口，包括启动和停止服务器的功能。
- **Shell 模块**: 定义了与操作系统交互的接口，如在浏览器中打开 URL。

## 构建和运行

### 构建项目
```bash
npm run build
```
使用 tsup 进行构建。

### 类型检查
```bash
npm run typecheck
```
使用 TypeScript 编译器进行类型检查。

## 开发约定

1. **模块化设计**: 每个功能模块都有独立的 API 定义文件。
2. **类型安全**: 使用 Zod 进行严格的输入输出数据验证。
3. **IPC 抽象**: 提供了创建 IPC 客户端和处理器的通用工具函数。
4. **错误处理**: 在 IPC 调用中包含错误处理和日志记录。